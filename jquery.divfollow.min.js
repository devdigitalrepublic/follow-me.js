/* DivFollow 1.42 | Anthony Drake Frost | http://github.com/lordkai/DivFollow */
(function(f){function g(c,e,d,b,a,k){var g=e.offset().top,m=g+d,h=c.outerHeight();e=e.height()-h;var l=f(window).scrollTop()+(""===b.offsetElement?b.offset:f("#"+b.offsetElement).height()),h=parseInt(c.css("margin-top"),10);l>m?(d=l-g,d<e?(a[0]||(a[0]=!0,b.movingStart()),k?c.stop().animate({marginTop:d+"px"},b.speed,function(){b.movingEnd();a[0]=!1;a[1]=!1;a[2]=!1}):c.css("margin-top",d+"px")):h!==e&&(a[1]||(a[1]=!0,b.bottomStart()),k?c.stop().animate({marginTop:e+"px"},b.speed,function(){b.bottomEnd();a[0]=!1;a[1]=!1;a[2]=!1}):c.css("margin-top",e+"px"))):h!==d&&(a[2]||(a[2]=!0,b.topStart()),k?c.stop().animate({marginTop:d+"px"},b.speed,function(){b.topEnd();a[0]=!1;a[1]=!1;a[2]=!1}):c.css("margin-top",d+"px"));return a}f.fn.follow=function(c){var e=f.extend({container:"container",topStart:function(){},topEnd:function(){},bottomStart:function(){},bottomEnd:function(){},movingStart:function(){},movingEnd:function(){},speed:500,offset:0,offsetElement:""},c);return this.each(function(){var d=f("#"+e.container),b=f(this),a=b.offset().top-d.offset().top,c=[!1,!1,!1],c=g(b,d,a,e,c,!1);f(window).scroll(function(){g(b,d,a,e,c,!0)});f(window).resize(function(){b.css("margin-top");b.css("margin-top","0px");c=g(b,d,a,e,c,!1)})})}})(jQuery);