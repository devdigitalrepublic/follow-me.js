/* DivFollow 1.4 | Anthony Drake Frost | http://github.com/lordkai/DivFollow */
(function(c){function l(d,e,f,a,b){var m=c(window).scrollTop()+(""===a.offsetElement?a.offset:c("#"+a.offsetElement).height()),g=parseInt(d.css("margin-top"),10);m>e?(e=m-e,e<f?(b[0]||(b[0]=!0,a.movingStart()),d.stop().animate({marginTop:e+"px"},a.speed,function(){a.movingEnd();b[0]=!1;b[1]=!1;b[2]=!1})):g!==f&&(b[1]||(b[1]=!0,a.bottomStart()),d.stop().animate({marginTop:f+"px"},a.speed,function(){a.bottomEnd();b[0]=!1;b[1]=!1;b[2]=!1}))):0!==g&&(b[2]||(b[2]=!0,a.topStart()),d.stop().animate({marginTop:"0px"},a.speed,function(){a.topEnd();b[0]=!1;b[1]=!1;b[2]=!1}));return b}c.fn.follow=function(d){var e=c.extend({container:"container",topStart:function(){},topEnd:function(){},bottomStart:function(){},bottomEnd:function(){},movingStart:function(){},movingEnd:function(){},speed:500,offset:0,offsetElement:""},d);return this.each(function(){var f=c("#"+e.container),a=c(this),b=f.offset().top,d=a.outerHeight(),g=f.height(),h=g-d,k=[!1,!1,!1],k=l(a,b,h,e,k);c(window).scroll(function(){l(a,b,h,e,k)});c(window).resize(function(){var c=a.css("margin-top");a.css("margin-top","0px");b=f.offset().top;d=a.outerHeight();g=f.height();h=g-d;c>h?a.css("margin-top",h):a.css("margin-top",c);k=l(a,b,h,e,k)})})}})(jQuery);