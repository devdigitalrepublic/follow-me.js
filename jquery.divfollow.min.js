(function(b){function h(c,d,e,a){var f=b(window).scrollTop(),l=parseInt(c.css("margin-top"),10);f>d?(d=f-d,d<e?(a.movingStart(),c.stop().animate({marginTop:d+"px"},"slow",a.movingEnd)):l!==e&&(a.bottomStart(),c.stop().animate({marginTop:e+"px"},"slow",a.bottomEnd))):0!==l&&(a.topStart(),c.stop().animate({marginTop:"0px"},"slow",a.topEnd))}b.fn.follow=function(c){var d=b.extend({container:"container",topStart:function(){},topEnd:function(){},bottomStart:function(){},bottomEnd:function(){},movingStart:function(){},movingEnd:function(){}},c);return this.each(function(){var e=b("#"+d.container),a=b(this),f=e.offset().top,c=a.outerHeight(),k=e.height(),g=k-c;h(a,f,g,d);b(window).scroll(function(){h(a,f,g,d)});b(window).resize(function(){var b=a.css("margin-top");a.css("margin-top","0px");f=e.offset().top;c=a.outerHeight();k=e.height();g=k-c;b>g?a.css("margin-top",g):a.css("margin-top",b);h(a,f,g,d)})})}})(jQuery);