/* DivFollow 1.4 | Anthony Drake Frost | http://github.com/lordkai/DivFollow */
(function(c){function g(f,d,b,a){var e=d.offset().top,h=f.outerHeight();d=d.height()-h;var g=c(window).scrollTop()+(""===b.offsetElement?b.offset:c("#"+b.offsetElement).height()),h=parseInt(f.css("margin-top"),10);g>e?(e=g-e,e<d?(a[0]||(a[0]=!0,b.movingStart()),f.stop().animate({marginTop:e+"px"},b.speed,function(){b.movingEnd();a[0]=!1;a[1]=!1;a[2]=!1})):h!==d&&(a[1]||(a[1]=!0,b.bottomStart()),f.stop().animate({marginTop:d+"px"},b.speed,function(){b.bottomEnd();a[0]=!1;a[1]=!1;a[2]=!1}))):0!==h&&(a[2]||(a[2]=!0,b.topStart()),f.stop().animate({marginTop:"0px"},b.speed,function(){b.topEnd();a[0]=!1;a[1]=!1;a[2]=!1}));return a}c.fn.follow=function(f){var d=c.extend({container:"container",topStart:function(){},topEnd:function(){},bottomStart:function(){},bottomEnd:function(){},movingStart:function(){},movingEnd:function(){},speed:500,offset:0,offsetElement:""},f);return this.each(function(){var b=c("#"+d.container),a=c(this),e=[!1,!1,!1],e=g(a,b,d,e);c(window).scroll(function(){g(a,b,d,e)});c(window).resize(function(){var c=a.css("margin-top");a.css("margin-top","0px");markDistanceFromPageTop=b.offset().top;markHeight=a.outerHeight();containerHeight=b.height();leeway=containerHeight-markHeight;c>leeway?a.css("margin-top",leeway):a.css("margin-top",c);e=g(a,b,d,e)})})}})(jQuery);